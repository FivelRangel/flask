const ClienteDetalle = ({ cliente }) => {
    if (!cliente) return null;

    const generarPDF = () => {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();

        const pageWidth = doc.internal.pageSize.getWidth();
        const margin = 10;

        // Fondo de la card
        doc.setFillColor(240, 240, 240); // Gris claro
        doc.rect(margin, margin, pageWidth - margin * 2, 260, 'F'); // Card Background

        // Título del PDF
        doc.setFont('helvetica', 'bold');
        doc.setFontSize(18);
        doc.text('Detalles del Cliente', pageWidth / 2, margin + 20, { align: 'center' });

        // Información del Cliente
        const startY = margin + 30;
        doc.setFontSize(12);
        doc.setFont('helvetica', 'normal');
        doc.text('Información del Cliente', margin + 10, startY);
        doc.setFontSize(10);
        doc.text(`Nombre: ${cliente.cliente.nombre}`, margin + 10, startY + 10);
        doc.text(`Teléfono: ${cliente.cliente.telefono}`, margin + 10, startY + 20);
        doc.text(`Dirección: ${cliente.cliente.direccion}`, margin + 10, startY + 30);

        // Línea divisora
        doc.setDrawColor(200, 200, 200);
        doc.line(margin + 10, startY + 40, pageWidth - margin - 10, startY + 40);

        // Pedidos
        let pedidosStartY = startY + 50;
        doc.setFontSize(12);
        doc.text('Pedidos', margin + 10, pedidosStartY);

        cliente.pedidos.forEach((pedido, index) => {
            const offset = pedidosStartY + 15 + index * 40;

            // Card para cada pedido
            doc.setFillColor(255, 255, 255);
            doc.rect(margin + 10, offset, pageWidth - margin * 2 - 10, 35, 'F');

            doc.setFontSize(10);
            doc.text(`Menú: ${pedido.menu}`, margin + 15, offset + 5);
            doc.text(`Cantidad: ${pedido.cantidad_personas}`, margin + 15, offset + 10);
            doc.text(`Total: $${pedido.total.toFixed(2)}`, margin + 15, offset + 15);
            doc.text(`Anticipo: $${pedido.anticipo.toFixed(2)}`, margin + 15, offset + 20);
            doc.text(`Restante: $${pedido.restante.toFixed(2)}`, margin + 15, offset + 25);
            doc.text(`Hora de Entrega: ${pedido.hora_entrega}`, margin + 15, offset + 30);
            doc.text(`Estado: ${pedido.estado}`, margin + 15, offset + 35);

            // Borde de la tarjeta
            doc.setDrawColor(200, 200, 200);
            doc.rect(margin + 10, offset, pageWidth - margin * 2 - 10, 35, 'S');
        });

        // Guardar PDF
        doc.save(`${cliente.cliente.nombre}_detalles.pdf`);
    };

    return (
        <div className="bg-white shadow-md rounded-lg p-6 mb-8 flex flex-col lg:flex-row space-y-6 lg:space-y-0 lg:space-x-6">
            {/* Información del Cliente (Izquierda) */}
            <div className="w-full lg:w-1/2">
                <h2 className="text-2xl font-bold text-gray-800 mb-4">Información del Cliente</h2>
                <div className="space-y-4">
                    <p className="text-gray-800"><strong>Nombre:</strong> {cliente.cliente.nombre}</p>
                    <p className="text-gray-800"><strong>Teléfono:</strong> {cliente.cliente.telefono}</p>
                    <p className="text-gray-800"><strong>Dirección:</strong> {cliente.cliente.direccion}</p>
                </div>

                {/* Botón para generar PDF */}
                <div className="mt-6">
                    <button
                        className="bg-green-500 text-white font-bold py-2 px-4 rounded hover:bg-green-700 transition-all"
                        onClick={generarPDF}
                    >
                        Generar PDF
                    </button>
                </div>
            </div>

            {/* Pedidos del Cliente (Derecha) */}
            <div className="w-full lg:w-1/2">
                <h2 className="text-2xl font-bold text-gray-800 mb-4">Pedidos</h2>
                <div className="space-y-6">
                    {cliente.pedidos.map((pedido, index) => (
                        <div key={index} className="bg-gray-100 p-4 rounded-lg shadow-sm space-y-2">
                            <p className="text-gray-800"><strong>Menú:</strong> {pedido.menu}</p>
                            <p className="text-gray-800"><strong>Cantidad:</strong> {pedido.cantidad_personas}</p>
                            <p className="text-gray-800"><strong>Total:</strong> ${pedido.total.toFixed(2)}</p>
                            <p className="text-gray-800"><strong>Anticipo:</strong> ${pedido.anticipo.toFixed(2)}</p>
                            <p className="text-gray-800"><strong>Restante:</strong> ${pedido.restante.toFixed(2)}</p>
                            <p className="text-gray-800"><strong>Hora de Entrega:</strong> {pedido.hora_entrega}</p>
                            <p className="text-gray-800"><strong>Estado:</strong> {pedido.estado}</p>
                        </div>
                    ))}
                </div>
            </div>
        </div>
    );
};
